# Aurelia æ™ºèƒ½ä½“è‡ªä¸»éƒ¨ç½²æµ‹è¯•æŒ‡å—

## æ¦‚è¿°

Aurelia æ˜¯ä¸€ä¸ªå…·æœ‰è‡ªæˆ‘å¤åˆ¶ã€è‡ªä¸»å†³ç­–å’Œç›®æ ‡å‘ç°èƒ½åŠ›çš„æ™ºèƒ½ä½“ç³»ç»Ÿã€‚æœ¬æŒ‡å—æè¿°å¦‚ä½•æµ‹è¯•å…¶åœ¨ Ubuntu æœåŠ¡å™¨ä¸Šçš„è‡ªä¸»éƒ¨ç½²å’Œè¿è¡Œèƒ½åŠ›ã€‚

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Kernel                     â”‚
â”‚         (æ ¸å¿ƒåè°ƒå™¨ - main.rs)               â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                      â”‚
       â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Perception   â”‚      â”‚  Reasoning Engine    â”‚
â”‚    Core      â”‚â—„â”€â”€â”€â”€â–ºâ”‚   (æ¨ç†å¼•æ“)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                      â”‚
       â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Strategy    â”‚      â”‚ Execution Engine     â”‚
â”‚   Engine     â”‚â—„â”€â”€â”€â”€â–ºâ”‚   (æ‰§è¡Œå¼•æ“)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                      â”‚
       â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Survival    â”‚      â”‚  Metamorphosis       â”‚
â”‚  Protocol    â”‚â—„â”€â”€â”€â”€â–ºâ”‚     Engine           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æµ‹è¯•ç¯å¢ƒå‡†å¤‡

### 1. Ubuntu æœåŠ¡å™¨è¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Ubuntu 20.04 LTS æˆ–æ›´é«˜ç‰ˆæœ¬
- **æœ€ä½é…ç½®**: 2 CPUæ ¸å¿ƒ, 4GB RAM, 20GB ç£ç›˜ç©ºé—´
- **ç½‘ç»œ**: SSHè®¿é—® (ç«¯å£22), WebSocketæ”¯æŒ (ç«¯å£8080)
- **ä¾èµ–è½¯ä»¶**: 
  - åŸºç¡€å·¥å…·: `curl`, `wget`, `git`
  - ç›‘æ§å·¥å…·: `htop`, `netstat`, `ps`

### 2. æœ¬åœ°ç¯å¢ƒå‡†å¤‡

```bash
# ç¼–è¯‘é¡¹ç›®
cargo build --release

# è®¾ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œè®¾ç½®å¿…è¦çš„ API å¯†é’¥

# é…ç½®æµ‹è¯•ç¯å¢ƒ
# ç¼–è¾‘ test_env.jsonï¼Œè®¾ç½®ç›®æ ‡æœåŠ¡å™¨ä¿¡æ¯
vim test_env.json
```

### 3. SSH å¯†é’¥é…ç½®

```bash
# ç”Ÿæˆ SSH å¯†é’¥å¯¹ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
ssh-keygen -t rsa -b 4096

# å¤åˆ¶å…¬é’¥åˆ°ç›®æ ‡æœåŠ¡å™¨
ssh-copy-id ubuntu@<server-ip>

# æµ‹è¯•è¿æ¥
ssh ubuntu@<server-ip> "echo 'SSH connection successful'"
```

## æµ‹è¯•æ‰§è¡Œæ­¥éª¤

### é˜¶æ®µ 1: åŸºç¡€éƒ¨ç½²æµ‹è¯•

```bash
# è¿è¡Œè‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
./test_deployment.sh

# è„šæœ¬å°†æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
# 1. é¢„éƒ¨ç½²æ£€æŸ¥ï¼ˆSSHè¿æ¥ã€æ–‡ä»¶å®Œæ•´æ€§ï¼‰
# 2. æ„å»ºéƒ¨ç½²åŒ…
# 3. éƒ¨ç½²åˆ°ç›®æ ‡æœåŠ¡å™¨
# 4. å¯åŠ¨æ™ºèƒ½ä½“
# 5. éªŒè¯è¿è¡ŒçŠ¶æ€
```

### é˜¶æ®µ 2: è‡ªæˆ‘å¤åˆ¶æµ‹è¯•

æµ‹è¯•æ™ºèƒ½ä½“çš„è‡ªä¸»å¤åˆ¶èƒ½åŠ›ï¼š

```bash
# åœ¨ä¸»æœåŠ¡å™¨ä¸Šåˆ›å»ºéƒ¨ç½²è§¦å‘æ–‡ä»¶
ssh ubuntu@192.168.1.100 'cat > /home/ubuntu/aurelia_agent/deploy_trigger.json << EOF
{
    "ip": "192.168.1.101",
    "remote_user": "ubuntu",
    "private_key_path": "~/.ssh/id_rsa",
    "remote_path": "/home/ubuntu/aurelia_replica",
    "local_exe_path": "./kernel"
}
EOF'

# ç›‘æ§å¤åˆ¶è¿‡ç¨‹
python3 monitor_validation.py --test replication
```

### é˜¶æ®µ 3: è‡ªä¸»è¡Œä¸ºéªŒè¯

```bash
# è¿è¡Œå®Œæ•´éªŒè¯å¥—ä»¶
python3 monitor_validation.py

# æŒç»­ç›‘æ§ï¼ˆ60åˆ†é’Ÿï¼‰
python3 monitor_validation.py --continuous 60
```

éªŒè¯é¡¹ç›®åŒ…æ‹¬ï¼š
- âœ… è¿›ç¨‹è¿è¡ŒçŠ¶æ€
- âœ… èµ„æºä½¿ç”¨æƒ…å†µï¼ˆCPUã€å†…å­˜ï¼‰
- âœ… æ—¥å¿—æ´»åŠ¨
- âœ… è‡ªä¸»å†³ç­–è¡Œä¸º
- âœ… ç½‘ç»œé€šä¿¡
- âœ… è‡ªæˆ‘å¤åˆ¶èƒ½åŠ›

### é˜¶æ®µ 4: æ•…éšœæ¢å¤æµ‹è¯•

```bash
# æ¨¡æ‹Ÿè¿›ç¨‹å´©æºƒ
ssh ubuntu@192.168.1.100 "pkill -f kernel"

# ç­‰å¾…è‡ªåŠ¨æ¢å¤
sleep 30

# éªŒè¯æ¢å¤çŠ¶æ€
python3 monitor_validation.py --test running
```

## ç›‘æ§å’ŒéªŒè¯

### å®æ—¶æ—¥å¿—ç›‘æ§

```bash
# ä¸»æœåŠ¡å™¨æ—¥å¿—
ssh ubuntu@192.168.1.100 "tail -f /home/ubuntu/aurelia_agent/aurelia.log"

# å‰¯æœ¬æœåŠ¡å™¨æ—¥å¿—
ssh ubuntu@192.168.1.101 "tail -f /home/ubuntu/aurelia_replica/aurelia.log"
```

### æ€§èƒ½ç›‘æ§

```bash
# CPU å’Œå†…å­˜ä½¿ç”¨
ssh ubuntu@192.168.1.100 "htop"

# ç½‘ç»œè¿æ¥
ssh ubuntu@192.168.1.100 "netstat -an | grep ESTABLISHED"

# è¿›ç¨‹è¯¦æƒ…
ssh ubuntu@192.168.1.100 "ps aux | grep kernel"
```

### éªŒè¯æŒ‡æ ‡

| æµ‹è¯•é¡¹ | é¢„æœŸç»“æœ | éªŒè¯æ–¹æ³• |
|--------|----------|----------|
| è¿›ç¨‹è¿è¡Œ | kernelè¿›ç¨‹æŒç»­è¿è¡Œ | `ps aux \| grep kernel` |
| CPUä½¿ç”¨ | < 80% | `top -bn1` |
| å†…å­˜ä½¿ç”¨ | < 1GB | `pmap <pid>` |
| æ—¥å¿—ç”Ÿæˆ | æŒç»­äº§ç”Ÿæ—¥å¿— | `tail -f aurelia.log` |
| è‡ªä¸»å†³ç­– | ç­–ç•¥å†³ç­–äº‹ä»¶ | æ—¥å¿—ä¸­åŒ…å« `StrategyDecision` |
| ç½‘ç»œé€šä¿¡ | WebSocketè¿æ¥æ´»è·ƒ | `netstat -an \| grep 8080` |
| è‡ªæˆ‘å¤åˆ¶ | æˆåŠŸéƒ¨ç½²åˆ°å‰¯æœ¬æœåŠ¡å™¨ | å‰¯æœ¬æœåŠ¡å™¨ä¸Šå­˜åœ¨kernelè¿›ç¨‹ |

## æµ‹è¯•ç»“æœåˆ†æ

éªŒè¯ç»“æœä¿å­˜åœ¨ `validation_results.json`ï¼š

```json
{
  "start_time": "2024-01-01T10:00:00",
  "tests": [
    {
      "name": "agent_running",
      "server": "192.168.1.100",
      "passed": true
    },
    ...
  ],
  "summary": {
    "total_tests": 12,
    "passed": 11,
    "failed": 1,
    "success_rate": 91.7
  }
}
```

## æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

1. **SSHè¿æ¥å¤±è´¥**
   ```bash
   # æ£€æŸ¥SSHæœåŠ¡
   systemctl status ssh
   # æ£€æŸ¥é˜²ç«å¢™
   ufw status
   ```

2. **éƒ¨ç½²å¤±è´¥**
   ```bash
   # æ£€æŸ¥ç›®æ ‡ç›®å½•æƒé™
   ls -la /home/ubuntu/
   # æ£€æŸ¥ç£ç›˜ç©ºé—´
   df -h
   ```

3. **æ™ºèƒ½ä½“æœªå¯åŠ¨**
   ```bash
   # æŸ¥çœ‹é”™è¯¯æ—¥å¿—
   tail -n 100 aurelia.log | grep ERROR
   # æ£€æŸ¥ä¾èµ–
   ldd kernel
   ```

## å®‰å…¨æ³¨æ„äº‹é¡¹

1. **æµ‹è¯•ç¯å¢ƒéš”ç¦»**: å»ºè®®åœ¨éš”ç¦»çš„æµ‹è¯•ç½‘ç»œä¸­è¿›è¡Œ
2. **APIå¯†é’¥ç®¡ç†**: ä½¿ç”¨æµ‹è¯•ä¸“ç”¨çš„APIå¯†é’¥
3. **èµ„æºé™åˆ¶**: è®¾ç½®é€‚å½“çš„èµ„æºé™åˆ¶é˜²æ­¢å¤±æ§
4. **æ—¥å¿—æ¸…ç†**: å®šæœŸæ¸…ç†æµ‹è¯•æ—¥å¿—é¿å…ç£ç›˜æ»¡

## æ¸…ç†æµ‹è¯•ç¯å¢ƒ

```bash
# åœæ­¢æ‰€æœ‰æ™ºèƒ½ä½“è¿›ç¨‹
ssh ubuntu@192.168.1.100 "pkill -f kernel"
ssh ubuntu@192.168.1.101 "pkill -f kernel"

# æ¸…ç†éƒ¨ç½²æ–‡ä»¶
ssh ubuntu@192.168.1.100 "rm -rf /home/ubuntu/aurelia_*"
ssh ubuntu@192.168.1.101 "rm -rf /home/ubuntu/aurelia_*"

# æ¸…ç†æœ¬åœ°æµ‹è¯•æ–‡ä»¶
rm -f validation_results.json test_deployment.log
```

## é«˜çº§æµ‹è¯•åœºæ™¯

### 1. å¤šèŠ‚ç‚¹é›†ç¾¤æµ‹è¯•

ç¼–è¾‘ `test_env.json` æ·»åŠ æ›´å¤šæœåŠ¡å™¨èŠ‚ç‚¹ï¼Œæµ‹è¯•å¤§è§„æ¨¡éƒ¨ç½²ã€‚

### 2. ç½‘ç»œåˆ†åŒºæµ‹è¯•

æ¨¡æ‹Ÿç½‘ç»œæ•…éšœï¼Œæµ‹è¯•æ™ºèƒ½ä½“çš„å®¹é”™èƒ½åŠ›ã€‚

### 3. è´Ÿè½½æµ‹è¯•

å¢åŠ å¸‚åœºæ•°æ®é¢‘ç‡ï¼Œæµ‹è¯•é«˜è´Ÿè½½ä¸‹çš„è¡¨ç°ã€‚

### 4. çƒ­æ›´æ–°æµ‹è¯•

æµ‹è¯• Metamorphosis Engine çš„ä»£ç çƒ­æ›´æ–°èƒ½åŠ›ã€‚

## æ€»ç»“

é€šè¿‡ä»¥ä¸Šæµ‹è¯•æµç¨‹ï¼Œå¯ä»¥å…¨é¢éªŒè¯ Aurelia æ™ºèƒ½ä½“çš„ï¼š
- ğŸš€ è‡ªä¸»éƒ¨ç½²èƒ½åŠ›
- ğŸ”„ è‡ªæˆ‘å¤åˆ¶èƒ½åŠ›
- ğŸ§  è‡ªä¸»å†³ç­–èƒ½åŠ›
- ğŸ“Š èµ„æºç®¡ç†èƒ½åŠ›
- ğŸ›¡ï¸ æ•…éšœæ¢å¤èƒ½åŠ›

æµ‹è¯•é€šè¿‡åï¼Œç³»ç»Ÿå³å¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è‡ªä¸»è¿è¡Œã€‚