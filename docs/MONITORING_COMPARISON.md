# ğŸ“Š ç›‘æ§ç³»ç»Ÿå¯¹æ¯” - æ—¥å¿—è§£æ vs APIé›†æˆ

## æ¶æ„å¯¹æ¯”

### ğŸ”§ æ—§ç‰ˆæœ¬ - æ—¥å¿—è§£ææ–¹å¼
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Rustç³»ç»Ÿ   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼ è¾“å‡ºæ—¥å¿—
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ aurelia_    â”‚
â”‚ output.log  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼ è§£æ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Python    â”‚
â”‚  ç›‘æ§é¢æ¿   â”‚
â”‚ (ç«¯å£3030)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸš€ æ–°ç‰ˆæœ¬ - APIé›†æˆæ–¹å¼
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Rustç³»ç»Ÿ   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼ æä¾›API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Rust API   â”‚
â”‚ (ç«¯å£8080)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼ HTTPè¯·æ±‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Python    â”‚
â”‚  ç›‘æ§é¢æ¿   â”‚
â”‚ (ç«¯å£3030)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## åŠŸèƒ½å¯¹æ¯”

| ç‰¹æ€§ | æ—¥å¿—è§£æ | APIé›†æˆ |
|------|----------|---------|
| **æ•°æ®æ¥æº** | æ–‡ä»¶ (aurelia_output.log) | HTTP API (localhost:8080) |
| **æ•°æ®æ ¼å¼** | æ–‡æœ¬æ—¥å¿— | JSON |
| **æ›´æ–°æ–¹å¼** | æ–‡ä»¶è¯»å– | HTTPè¯·æ±‚ |
| **å®æ—¶æ€§** | ä¾èµ–æ—¥å¿—å†™å…¥ | å®æ—¶æŸ¥è¯¢ |
| **å¯é æ€§** | å¯èƒ½ä¸¢å¤±æ—¥å¿— | ç»“æ„åŒ–æ•°æ® |
| **æ€§èƒ½** | æ–‡ä»¶I/Oå¼€é”€ | ç½‘ç»œè¯·æ±‚å¼€é”€ |
| **æ‰©å±•æ€§** | å—é™äºæ—¥å¿—æ ¼å¼ | RESTful APIæ˜“æ‰©å±• |

## æ•°æ®è·å–æ–¹å¼å¯¹æ¯”

### æ—§ç‰ˆ - æ—¥å¿—è§£æ (`enhanced_monitor.py`)
```python
# ä»æ—¥å¿—æ–‡ä»¶è¯»å–
with open(LOG_FILE, 'r') as f:
    lines = f.readlines()[-2000:]  # æœ€å2000è¡Œ
    
for line in lines:
    # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£æ
    if "MarketData" in line:
        match = re.search(r'price[:\s]*([0-9.]+)', line)
        if match:
            price = float(match.group(1))
```

### æ–°ç‰ˆ - APIé›†æˆ (`api_monitor.py`)
```python
# ä»APIè·å–
with urllib.request.urlopen(f"{API_BASE_URL}/api/trading") as response:
    data = json.loads(response.read().decode('utf-8'))
    price = data['last_price']['BTCUSDT']
```

## APIç«¯ç‚¹æ˜ å°„

| æ•°æ®ç±»å‹ | æ—¥å¿—æ¨¡å¼ | APIç«¯ç‚¹ |
|----------|----------|---------|
| ç³»ç»ŸçŠ¶æ€ | `Monitoring X agents` | `/api/status` |
| å¸‚åœºæ•°æ® | `MarketData.*price` | `/api/trading` |
| ç­–ç•¥å†³ç­– | `StrategyDecision` | `/api/trading` |
| CPUä½¿ç”¨ç‡ | `ps aux` å‘½ä»¤ | `/api/metrics` |
| å†…å­˜ä½¿ç”¨ | `ps aux` å‘½ä»¤ | `/api/metrics` |
| ä»£ç†çŠ¶æ€ | è¿›ç¨‹æ£€æŸ¥ | `/api/agents` |
| é›†ç¾¤å¥åº· | å¤šå¤„æ—¥å¿— | `/api/cluster/status` |

## æ€§èƒ½å¯¹æ¯”

### å“åº”æ—¶é—´
- **æ—¥å¿—è§£æ**: ~100ms (è¯»å–æ–‡ä»¶)
- **APIè°ƒç”¨**: 
  - å¿«é€Ÿç«¯ç‚¹ (`/api/metrics`): < 1ms
  - æ…¢é€Ÿç«¯ç‚¹ (`/api/status`): ~5ç§’

### æ›´æ–°é¢‘ç‡
- **æ—¥å¿—è§£æ**: 3ç§’è½®è¯¢
- **APIé›†æˆ**: 3ç§’è½®è¯¢ï¼ˆå¯è°ƒæ•´ï¼‰

## ä¼˜åŠ¿å¯¹æ¯”

### âœ… APIé›†æˆçš„ä¼˜åŠ¿
1. **ç»“æ„åŒ–æ•°æ®** - JSONæ ¼å¼ï¼Œæ˜“äºè§£æ
2. **å®æ—¶æ€§** - ç›´æ¥æŸ¥è¯¢å½“å‰çŠ¶æ€
3. **å¯é æ€§** - ä¸ä¾èµ–æ—¥å¿—æ ¼å¼
4. **æ‰©å±•æ€§** - æ˜“äºæ·»åŠ æ–°ç«¯ç‚¹
5. **æ ‡å‡†åŒ–** - RESTfulæ¥å£
6. **è·¨å¹³å°** - ä»»ä½•è¯­è¨€éƒ½å¯è°ƒç”¨

### âš ï¸ æ—¥å¿—è§£æçš„ä¼˜åŠ¿
1. **å†å²è®°å½•** - ä¿ç•™æ‰€æœ‰å†å²æ—¥å¿—
2. **ç¦»çº¿åˆ†æ** - ä¸éœ€è¦ç³»ç»Ÿè¿è¡Œ
3. **è°ƒè¯•ä¿¡æ¯** - åŒ…å«è¯¦ç»†é”™è¯¯ä¿¡æ¯
4. **ä½è€¦åˆ** - ä¸å½±å“ä¸»ç³»ç»Ÿæ€§èƒ½

## ä½¿ç”¨ç¤ºä¾‹

### è·å–ç³»ç»ŸçŠ¶æ€
```bash
# APIæ–¹å¼
curl http://localhost:8080/api/status

# ç›‘æ§é¢æ¿æ•°æ®æ¥å£
curl http://localhost:3030/api/data
```

### Pythoné›†æˆ
```python
import urllib.request
import json

# è·å–å®æ—¶æ•°æ®
def get_metrics():
    with urllib.request.urlopen("http://localhost:8080/api/metrics") as response:
        return json.loads(response.read().decode('utf-8'))

metrics = get_metrics()
print(f"CPU: {metrics['cpu_usage']}%")
print(f"Memory: {metrics['memory_percentage']}%")
```

### JavaScripté›†æˆ
```javascript
// å®æ—¶ç›‘æ§
async function monitorSystem() {
    const response = await fetch('http://localhost:8080/api/status');
    const data = await response.json();
    
    console.log(`Agents: ${data.total_agents}`);
    console.log(`Trading: ${data.trading_active ? 'Active' : 'Inactive'}`);
}

setInterval(monitorSystem, 3000);
```

## è¿ç§»æŒ‡å—

### ä»æ—¥å¿—è§£æè¿ç§»åˆ°API
1. **åœæ­¢æ—§ç›‘æ§**
   ```bash
   pkill -f "enhanced_monitor.py"
   ```

2. **å¯åŠ¨æ–°ç›‘æ§**
   ```bash
   python3 api_monitor.py
   ```

3. **è®¿é—®é¢æ¿**
   - åœ°å€ä¸å˜: http://localhost:3030
   - ç•Œé¢ä¼˜åŒ–ï¼Œæ•°æ®æ›´å‡†ç¡®

## ç›‘æ§é¢æ¿åŠŸèƒ½

### æ–°ç‰ˆåŠŸèƒ½
- âœ… å®æ—¶ç³»ç»ŸæŒ‡æ ‡
- âœ… äº¤æ˜“çŠ¶æ€ç›‘æ§
- âœ… ä»£ç†ç®¡ç†
- âœ… é›†ç¾¤å¥åº·åº¦
- âœ… APIè¿æ¥çŠ¶æ€
- âœ… é”™è¯¯æç¤º
- âœ… è‡ªåŠ¨é‡è¿

### æ•°æ®å±•ç¤º
- **ç³»ç»Ÿæ¦‚è§ˆ** - CPUã€å†…å­˜ã€ä»£ç†æ•°é‡
- **äº¤æ˜“ä¿¡æ¯** - ä»·æ ¼ã€äº¤æ˜“é‡ã€ç›ˆäº
- **ä»£ç†çŠ¶æ€** - æ¯ä¸ªä»£ç†çš„è¯¦ç»†ä¿¡æ¯
- **é›†ç¾¤çŠ¶æ€** - å¥åº·åº¦ã€èµ„æºä½¿ç”¨
- **äº‹ä»¶æ—¥å¿—** - ç³»ç»Ÿäº‹ä»¶è®°å½•

## æ€»ç»“

APIé›†æˆæ–¹å¼ç›¸æ¯”æ—¥å¿—è§£æï¼š
- **æ›´å¯é ** - ç»“æ„åŒ–æ•°æ®ï¼Œä¸ä¼šè§£æé”™è¯¯
- **æ›´å®æ—¶** - ç›´æ¥æŸ¥è¯¢ç³»ç»ŸçŠ¶æ€
- **æ›´æ ‡å‡†** - RESTful APIï¼Œæ˜“äºé›†æˆ
- **æ›´çµæ´»** - å¯é€‰æ‹©æ€§è·å–éœ€è¦çš„æ•°æ®

æ¨èä½¿ç”¨APIé›†æˆæ–¹å¼è¿›è¡Œç›‘æ§ï¼